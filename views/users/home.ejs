<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
    <meta charset="utf-8">
    <title>BOOKSAW</title>
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title" content="">
    <meta property="og:type" content="">
    <meta property="og:url" content="">
    <meta property="og:image" content="">
    <link rel="shortcut icon" type="image/x-icon" href="/public/spellbook.png">
    <link rel="stylesheet" href="/public/assets/css/maind134.css?v=3.4">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css">
    <style>
        
        /* A simple class for the carousel to handle its full width and height */
        .full-width-section {
            width: 100%;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        /* --- Amazing Carousel Styles --- */
        .amazing-carousel {
            position: relative;
            width: 100%;
            height: 600px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 50px;
            background: #0d1a26;
        }

        .carousel-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('https://googleusercontent.com/image_collection/image_retrieval/12362878768744363278_0');
            background-size: cover;
            background-position: center;
            filter: blur(5px) brightness(0.6);
            animation: pan 20s linear infinite alternate;
            z-index: 1;
        }

        @keyframes pan {
            0% { background-position: 0% 0%; }
            100% { background-position: 100% 100%; }
        }

        .carousel-content-wrapper {
            position: relative;
            z-index: 3;
            width: 90%;
            max-width: 900px;
            height: 300px;
            text-align: center;
            color: white;
        }

        .carousel-slide {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            width: 100%;
            opacity: 0;
            transition: opacity 1s ease, transform 1s ease;
        }

        .carousel-slide.active {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }

        .carousel-slide p {
            font-size: 2.2rem;
            font-weight: 300;
            line-height: 1.4;
            font-style: italic;
        }

        .carousel-slide cite {
            display: block;
            margin-top: 20px;
            font-size: 1.2rem;
            font-style: normal;
            font-weight: 500;
            color: #ccc;
        }

        .carousel-nav {
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 12px;
            z-index: 4;
        }

        .carousel-dot {
            width: 12px;
            height: 12px;
            background: rgba(255, 255, 255, 0.4);
            border-radius: 50%;
            cursor: pointer;
            transition: background 0.3s ease, transform 0.3s ease;
        }

        .carousel-dot.active {
            background: #ffffff;
            transform: scale(1.2);
        }
.amazing-carousel {
    position: relative;
    width: 100%;
    height: 600px;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-top: 50px;
    background: #e6e2d3; /* A soft, warm background color */
}

.carousel-background {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url('https://googleusercontent.com/image_collection/image_retrieval/12362878768744363278_0');
    background-size: cover;
    background-position: center;
    filter: blur(5px) brightness(0.7); /* Adjusted brightness for a warmer feel */
    animation: pan 20s linear infinite alternate;
    z-index: 1;
}

@keyframes pan {
    0% { background-position: 0% 0%; }
    100% { background-position: 100% 100%; }
}

.carousel-content-wrapper {
    position: relative;
    z-index: 3;
    width: 90%;
    max-width: 900px;
    height: 300px;
    text-align: center;
    color: #088178; /* Rich, dark brown text */
    text-shadow: 1px 1px 2px rgba(0,0,0,0.1); /* Subtle shadow for readability */
}

.carousel-slide {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0.9);
    width: 100%;
    opacity: 0;
    transition: opacity 1s ease, transform 1s ease;
}

.carousel-slide.active {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
}

.carousel-slide p {
    font-family: 'Georgia', serif; /* A classic serif font for a book feel */
    font-size: 2.2rem;
    font-weight: 300;
    line-height: 1.4;
    font-style: italic;
    color: #088178; /* Use the same rich, dark brown */
}

.carousel-slide cite {
    display: block;
    margin-top: 20px;
    font-family: 'Times New Roman', serif; /* Another classic font for citation */
    font-size: 1.2rem;
    font-style: normal;
    font-weight: 500;
    color: #088178; /* A muted gold or sepia tone */
}

.carousel-nav {
    position: absolute;
    bottom: 40px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 12px;
    z-index: 4;
}

.carousel-dot {
    width: 12px;
    height: 12px;
    background: #088178(140, 120, 81, 0.5); /* Semi-transparent sepia dot */
    border-radius: 50%;
    cursor: pointer;
    transition: background 0.3s ease, transform 0.3s ease;
}

.carousel-dot.active {
    background: #088178; /* Solid sepia tone for active dot */
    transform: scale(1.2);
}
    </style>
</head>
<body>
    <%- include('../partials/userHeader') %>
    <div class="mobile-header-active mobile-header-wrapper-style">
        <div class="mobile-header-wrapper-inner">
            <div class="mobile-header-top">
                <div class="mobile-header-logo">
                    <a href="/home"><img src="/public/main-logo (1).png" alt="logo"></a>
                </div>
                <div class="mobile-menu-close close-style-wrap close-style-position-inherit">
                    <button class="close-style search-close">
                        <i class="icon-top"></i>
                        <i class="icon-bottom"></i>
                    </button>
                </div>
            </div>
            <div class="mobile-header-content-area">
                <div class="mobile-search search-style-3 mobile-header-border">
                    <form action="/loadShop">
                        <input type="text" name="query" placeholder="Search for items…">
                        <button type="submit"><i class="fi-rs-search"></i></button>
                    </form>
                </div>
                <div class="mobile-menu-wrap mobile-header-border">
                    <nav>
                        <ul class="mobile-menu">
                            <li class="menu-item-has-children"><span class="menu-expand"></span><a href="/home">Home</a></li>
                            <li class="menu-item-has-children"><span class="menu-expand"></span><a href="/loadShop">Shop</a></li>
                            <li class="menu-item-has-children"><span class="menu-expand"></span><a href="/loadProfile">Profile</a></li>
                            <li class="menu-item-has-children"><span class="menu-expand"></span><a href="#">Pages</a></li>
                            <li class="menu-item-has-children"><span class="menu-expand"></span><a href="#">Language</a></li>
                        </ul>
                    </nav>
                </div>
                <div class="mobile-social-icon">
                    <h5 class="mb-15 text-grey-4">Follow Us</h5>
                    <a href="#"><img src="/public/assets/imgs/theme/icons/icon-facebook.svg" alt=""></a>
                    <a href="#"><img src="/public/assets/imgs/theme/icons/icon-twitter.svg" alt=""></a>
                    <a href="#"><img src="/public/assets/imgs/theme/icons/icon-instagram.svg" alt=""></a>
                    <a href="#"><img src="/public/assets/imgs/theme/icons/icon-pinterest.svg" alt=""></a>
                    <a href="#"><img src="/public/assets/imgs/theme/icons/icon-youtube.svg" alt=""></a>
                </div>
            </div>
        </div>
    </div>

    <main class="main">
        <section class="amazing-carousel">
            <div class="carousel-background"></div>
            <div class="carousel-content-wrapper" id="carousel-quotes">
                </div>
            <div class="carousel-nav" id="carousel-dots"></div>
        </section>

        <section class="featured section-padding position-relative">
            <div class="container">
                <div class="row">
                    <div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
                        <div class="banner-features wow fadeIn animated hover-up">
                            <img src="/public/client-image3.png" alt="" style="height: 95px">
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
                        <div class="banner-features wow fadeIn animated hover-up">
                            <img src="/public/client-image1.png" alt="" style="height: 95px;">
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
                        <div class="banner-features wow fadeIn animated hover-up">
                            <img src="/public/client-image2.png" alt="">
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
                        <div class="banner-features wow fadeIn animated hover-up">
                            <img src="/public/client-image4.png" alt="" style="height: 95px;">
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
                        <div class="banner-features wow fadeIn animated hover-up">
                            <img src="/public/client-image5.png" alt="">
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
                        <div class="banner-features wow fadeIn animated hover-up">
                            <img src="/public/assets/imgs/theme/icons/feature-6.png" alt="" style="height: 70px">
                            <h4 class="bg-6">24/7 Support</h4>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <section class="product-tabs section-padding position-relative wow fadeIn animated">
            <div class="bg-square"></div>
            <div class="container">
                <div class="tab-header">
                    <ul class="nav nav-tabs" id="myTab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="nav-tab-two" data-bs-toggle="tab" data-bs-target="#tab-two"
                                type="button" role="tab" aria-controls="tab-two" aria-selected="true">Popular</button>
                        </li>
                    </ul>
                    <a href="/loadShop" class="view-more d-none d-md-flex">View More<i
                            class="fi-rs-angle-double-small-right"></i></a>
                </div>
                <div class="tab-content wow fadeIn animated" id="myTabContent">
                    <div class="tab-pane fade show active" id="tab-two" role="tabpanel" aria-labelledby="tab-two">
                        <p>Products: <%= product.length %></p>
                        <% if(product && product.length > 0) { %>
                            <div class="row product-grid-3">
                                <% for(let i=0 ; i < product.length ; i++) { %>
                                    <div class="col-lg-4 col-md-4 col-12 col-sm-6">
                                        <div class="product-cart-wrap mb-30">
                                            <div class="product-img-action-wrap">
                                                <div class="product-img product-img-zoom">
                                                    <a href="/shop-product?id=<%= product[i]._id %>">
                                                        <img class="default-img"
                                                            src="/public/uploads/<%= product[i].Images[0] %>" alt="">
                                                        <img class="hover-img"
                                                            src="/public/uploads/<%= product[i].Images[1] %>" alt="">
                                                    </a>
                                                </div>
                                                <div class="product-action-1">
                                                    <a aria-label="Add To Wishlist" class="action-btn hover-up"
                                                        href="/wishlist?id=<%= product[i]._id %>"><i class="fi-rs-heart"></i></a>
                                                </div>
                                                <div class="product-badges product-badges-position product-badges-mrg">
                                                    <span class="hot">Hot</span>
                                                </div>
                                            </div>
                                            <div class="product-content-wrap">
                                                <div class="product-category">
                                                    <a href="/loadShop?category=<%= encodeURIComponent(product[i].Categories.categoryName) %>">
                                                        <%= product[i].Categories.categoryName %>
                                                    </a>
                                                </div>
                                                <h2><a href="/shop-product?id=<%= product[i]._id %>">
                                                        <%= product[i].Bookname %>
                                                    </a></h2>
                                                <div class="rating-result" title="90%">
                                                    <span><span>90%</span></span>
                                                </div>
                                                <% if (product[i].stock == 0) { %>
                                                    <div class="product-price">
                                                        <span style="display: inline-block; padding: 2px 16px; background-color: #ff0000; color: #ffffff; font-weight: bold; border-radius: 4px;">Currently Unavailable</span>
                                                    </div>
                                                <% } else { %>
                                                    <div class="product-price">
                                                        <span>$<%= product[i].saleprice %></span>
                                                        <span class="old-price">$<%= product[i].Regularprice %></span>
                                                    </div>
                                                    <div class="product-action-1 show">
                                                        <a aria-label="Add To Cart" class="action-btn hover-up"
                                                            onclick="addToCart('<%= product[i]._id %>')">
                                                            <i class="fi-rs-shopping-bag-add"></i>
                                                        </a>
                                                    </div>
                                                <% } %>
                                            </div>
                                        </div>
                                    </div>
                                <% } %>
                            </div>
                        <% } else { %>
                            <p>No products available.</p>
                        <% } %>
                    </div>
                </div>
            </div>
        </section>

        <section class="mb-50">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div class="banner-bg wow fadeIn animated"
                            style="background-image: url('/public/assets/imgs/banner/banner-8.jpg')">
                            <div class="banner-content">
                                <h5 class="text-grey-4 mb-15">Shop Today’s Deals</h5>
                                <h2 class="fw-600">Happy <span class="text-brand">Mother's Day</span>. Big Sale Up to 40%</h2>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <%- include('../partials/userFooter') %>

    <div id="preloader-active">
        <div class="preloader d-flex align-items-center justify-content-center">
            <div class="preloader-inner position-relative">
                <div class="text-center">
                    <h5 class="mb-10">Loading BookSaw</h5>
                    <div class="loader">
                        <div class="bar bar1"></div>
                        <div class="bar bar2"></div>
                        <div class="bar bar3"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <script>
        async function addToCart(productId) {
            try {
                const response = await fetch(`/addToCart?id=${productId}`, {
                    method: 'GET',
                });
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                const data = await response.json();
                if (data.success) {
                    toastr.success('Product added to cart');
                } else {
                    toastr.error(data.error);
                }
            } catch (error) {
                toastr.error('Stock limit exceeded');
                console.error('Stock limit exceeded:', error);
            }
        }
    </script>
    <script>
        const fallbackQuotes = [
            { content: "The only way to do great work is to love what you do.", author: "Steve Jobs" },
            { content: "Innovation distinguishes between a leader and a follower.", author: "Steve Jobs" },
            { content: "The future belongs to those who believe in the beauty of their dreams.", author: "Eleanor Roosevelt" },
            { content: "In the middle of difficulty lies opportunity.", author: "Albert Einstein" },
        ];

        async function fetchQuotes() {
            const quotes = [];
            const api_url = "https://api.quotable.io/random";
            const fetchPromises = fallbackQuotes.map(() => fetch(api_url));

            try {
                const responses = await Promise.all(fetchPromises);
                for (const response of responses) {
                    const data = await response.json();
                    quotes.push({ content: data.content, author: data.author });
                }
            } catch (error) {
                console.error('Error fetching quotes from API:', error);
                return fallbackQuotes;
            }
            return quotes;
        }

        function initCarousel() {
            const carousel = document.getElementById('carousel-quotes');
            const dotsContainer = document.getElementById('carousel-dots');
            let currentIndex = 0;
            let rotationInterval;
            let quotes = [];

            function renderCarousel() {
                carousel.innerHTML = '';
                dotsContainer.innerHTML = '';

                quotes.forEach((quote, index) => {
                    const slide = document.createElement('div');
                    slide.className = `carousel-slide ${index === currentIndex ? 'active' : ''}`;
                    slide.innerHTML = `<p>${quote.content}</p><cite>- ${quote.author}</cite>`;
                    carousel.appendChild(slide);

                    const dot = document.createElement('div');
                    dot.className = `carousel-dot ${index === currentIndex ? 'active' : ''}`;
                    dot.addEventListener('click', () => {
                        currentIndex = index;
                        updateCarousel();
                        stopRotation();
                        startRotation();
                    });
                    dotsContainer.appendChild(dot);
                });
            }

            function updateCarousel() {
                const slides = document.querySelectorAll('.carousel-slide');
                const dots = document.querySelectorAll('.carousel-dot');
                slides.forEach((slide, index) => slide.classList.toggle('active', index === currentIndex));
                dots.forEach((dot, index) => dot.classList.toggle('active', index === currentIndex));
            }

            function startRotation() {
                rotationInterval = setInterval(() => {
                    currentIndex = (currentIndex + 1) % quotes.length;
                    updateCarousel();
                }, 7000);
            }

            function stopRotation() {
                clearInterval(rotationInterval);
            }

            async function setup() {
                quotes = await fetchQuotes();
                if (quotes.length > 0) {
                    renderCarousel();
                    startRotation();
                }

                const carouselSection = document.querySelector('.amazing-carousel');
                carouselSection.addEventListener('mouseenter', stopRotation);
                carouselSection.addEventListener('mouseleave', startRotation);
            }

            setup();
        }

        document.addEventListener('DOMContentLoaded', initCarousel);
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="/public/assets/js/vendor/modernizr-3.6.0.min.js"></script>
    <script src="/public/assets/js/vendor/jquery-3.6.0.min.js"></script>
    <script src="/public/assets/js/vendor/jquery-migrate-3.3.0.min.js"></script>
    <script src="/public/assets/js/vendor/bootstrap.bundle.min.js"></script>
    <script src="/public/assets/js/plugins/slick.js"></script>
    <script src="/public/assets/js/plugins/jquery.syotimer.min.js"></script>
    <script src="/public/assets/js/plugins/wow.js"></script>
    <script src="/public/assets/js/plugins/jquery-ui.js"></script>
    <script src="/public/assets/js/plugins/perfect-scrollbar.js"></script>
    <script src="/public/assets/js/plugins/magnific-popup.js"></script>
    <script src="/public/assets/js/plugins/select2.min.js"></script>
    <script src="/public/assets/js/plugins/waypoints.js"></script>
    <script src="/public/assets/js/plugins/counterup.js"></script>
    <script src="/public/assets/js/plugins/jquery.countdown.min.js"></script>
    <script src="/public/assets/js/plugins/images-loaded.js"></script>
    <script src="/public/assets/js/plugins/isotope.js"></script>
    <script src="/public/assets/js/plugins/scrollup.js"></script>
    <script src="/public/assets/js/plugins/jquery.vticker-min.js"></script>
    <script src="/public/assets/js/plugins/jquery.theia.sticky.js"></script>
    <script src="/public/assets/js/plugins/jquery.elevatezoom.js"></script>
    <script src="/public/assets/js/maind134.js?v=3.4"></script>
    <script src="/public/assets/js/shopd134.js?v=3.4"></script>
</body>
</html>